;==============================================================================
; Project: NMI.zdsp
; File: shareddata.asm
; Date: 03/11/2022 19:30:30
;
; Created with zDevStudio - Z80 Development Studio.
;
;==============================================================================

;==============================================================================
; DATA
;==============================================================================

; -------------------
; half width 4x7 font
; -------------------
;
; 50 x 7 = 350 bytes
;
dbTbFont	DB $02,$02,$02,$02,$00,$02,$00; SPACE !
		DB $52,$57,$02,$02,$07,$02,$00; " #
		DB $25,$71,$62,$32,$74,$25,$00; $ %
		DB $22,$42,$30,$50,$50,$30,$00; & '
		DB $14,$22,$41,$41,$41,$22,$14; ( )
		DB $20,$70,$22,$57,$02,$00,$00; * +
		DB $00,$00,$00,$07,$00,$20,$20; , -
		DB $01,$01,$02,$02,$04,$14,$00; . /
		DB $22,$56,$52,$52,$52,$27,$00; 0 1
		DB $27,$51,$12,$21,$45,$72,$00; 2 3
		DB $57,$54,$56,$71,$15,$12,$00; 4 5
		DB $17,$21,$61,$52,$52,$22,$00; 6 7
		DB $22,$55,$25,$53,$52,$24,$00; 8 9
		DB $00,$00,$22,$00,$00,$22,$02; : ;
		DB $00,$10,$27,$40,$27,$10,$00; < =
		DB $02,$45,$21,$12,$20,$42,$00; > ?
		DB $23,$55,$75,$77,$45,$35,$00; @ A
		DB $63,$54,$64,$54,$54,$63,$00; B C
		DB $67,$54,$56,$54,$54,$67,$00; D E
		DB $73,$44,$64,$45,$45,$43,$00; F G
		DB $57,$52,$72,$52,$52,$57,$00; H I
		DB $35,$15,$16,$55,$55,$25,$00; J K
		DB $45,$47,$45,$45,$45,$75,$00; L M
		DB $62,$55,$55,$55,$55,$52,$00; N O
		DB $62,$55,$55,$65,$45,$43,$00; P Q
		DB $63,$54,$52,$61,$55,$52,$00; R S
		DB $75,$25,$25,$25,$25,$22,$00; T U
		DB $55,$55,$55,$55,$27,$25,$00; V W
		DB $55,$55,$25,$22,$52,$52,$00; X Y
		DB $73,$12,$22,$22,$42,$72,$03; Z [
		DB $46,$42,$22,$22,$12,$12,$06; \ ]
		DB $20,$50,$00,$00,$00,$00,$0F; ^ _
		DB $20,$10,$03,$05,$05,$03,$00; sterling_pound a
		DB $40,$40,$63,$54,$54,$63,$00; b c
		DB $10,$10,$32,$55,$56,$33,$00; d e
		DB $10,$20,$73,$25,$25,$43,$06; f g
		DB $42,$40,$66,$52,$52,$57,$00; h i
		DB $14,$04,$35,$16,$15,$55,$20; j k
		DB $60,$20,$25,$27,$25,$75,$00; l m
		DB $00,$00,$62,$55,$55,$52,$00; n o
		DB $00,$00,$63,$55,$55,$63,$41; p q
		DB $00,$00,$53,$66,$43,$46,$00; r s
		DB $00,$20,$75,$25,$25,$12,$00; t u
		DB $00,$00,$55,$55,$27,$25,$00; v w
		DB $00,$00,$55,$25,$25,$53,$06; x y
		DB $01,$02,$72,$34,$62,$72,$01; z {
		DB $24,$22,$22,$21,$22,$22,$04; | }
		DB $56,$A9,$06,$04,$06,$09,$06; ~ copyright

		;DB      $50,$20,$60,$50,$70,$55,$70     ; [?] [..]      128, 129

; ---------
; key table
; ---------
;
; (5 x 3 + 1) x 8 + 1 = 129 bytes
; (5 x 4 + 1) x 8 + 1 = 169 bytes
;
dbTbKeys	DB $f7
		DB '5', '4', '3', '2', '1'		; NORMAL
		DB '%', '$', '#', '@', '!'		; SS
		DB K_LEFT, $00, $00, $00, K_EDIT	; CS -> ESTO SON MAYUSCULAS, ME EQUIVOQUE Y PUSE EXTENDED MODE (E)
		;DB      $00, $00, $00, $00, $00	; E+SS
		DB $ef
		DB '6', '7', '8', '9', '0'
		DB '&', $27, '(', ')', '_'
		DB K_DOWN, K_UP, K_RIGHT, $00, K_DELETE
		;DB      $00, $00, $00, $00, $00
		DB $fb
		DB 'T', 'R', 'E', 'W', 'Q'
		DB '>', '<', $00, $00, $00
		DB K_MERGE, $00, $00, $00, $00
		;DB      $00, $00, $00, $00, $00
		DB $df
		DB 'Y', 'U', 'I', 'O', 'P'
		DB $00, $00, K_AT, ';', '"'
		DB '[', ']', $00, $00, $7f
		;DB      $00, $00, $00, $00, $00
		DB $fd
		DB 'G', 'F', 'D', 'S', 'A'
		DB $00, K_TO, $00, $00, $00
		DB '}', '{', '\', '|', '~'
		;DB      $00, $00, $00, $00, $00
		DB $bf
		DB 'H', 'J', 'K', 'L', K_ENTER
		DB '^', '-', '+', '=', K_SS_ENTER
		DB $00, $00, $00, $00, K_CS_ENTER
		;DB      $00, $00, $00, $00, $00
		DB $fe
		DB 'V', 'C', 'X', 'Z', $00		; CS IGNORED
		DB '/', '?', $60, ':', $00
		DB $00, $00, $00, $00, $00
		;DB      $00, $00, $00, $00, $00
		DB $7f
		DB 'B', 'N', 'M', $00, ' '		; SS IGNORED
		DB '*', ',', '.', $00, $00
		DB $00, $00, $00, $00, K_BREAK
		;DB      $00, $00, $00, $00, $00
		DB 0

; --------------
; keyboard flags
; --------------
;
flagCS		DB 0					; CS pressed
flagSS		DB 0					; SS pressed

; ---------------
; other variables
; ---------------
;
fhandle		DB 0			; file handle of files/dir opened by NMI.sys

flgAT		DB 0			; AT flag
row		DB 0			; row
col		DB 0			; col

prevJoy		DB 0			; previous joystroke
prevKey		DB 0			; previous keystroke

utoaBuf		DS 6+1			; buffer to utoa function

//
// VARIABLES USED BY API CALLS (PAGE 5)
//

dotDot		DB '..', 0		; used to open/change to current/upper dir (./..)

; ----------------
; dir entry buffer
; ----------------
;
; <byte>    attributes (like MSDOS)
; <asciiz>  file/dirname
; <DWord>   date
; <DWord>   filesize
;
; date and filesize are relatives to the end of file/dirname asciiz string
;
bufDir					; dir entry buffer
bDAttr		DB 0
bDName		DS 8+1+3+1+4+4, 0	; set to possible max size

buffer		DS 13			; buffer lo load TRD
					; 'Virtual Disk', 0

